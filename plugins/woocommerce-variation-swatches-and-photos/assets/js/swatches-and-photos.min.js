function variation_manager(e){this.variations=e;this.find_matching_variation=function(e){for(var t=0;t<this.variations.length;t++){var n=this.variations[t],r=!0;for(var i in n.attributes)r=r&e[i]!=undefined&&e[i]==n.attributes[i];if(r)return n}for(var t=0;t<this.variations.length;t++){var n=this.variations[t],r=!0;for(var i in n.attributes)r=r&e[i]!=undefined&&(e[i]==n.attributes[i]||n.attributes[i]=="");if(r)return n}return!1}}function variation_calculator(e,t,n,r,i){this.recalc_needed=!0;this.all_set_callback=r;this.not_all_set_callback=i;this.variation_keys=e;this.variations_available=n;this.variations_current={};this.variations_selected={};this.reset_current=function(){for(var e in this.variation_keys){this.variations_current[e]={};for(var t=0;t<this.variation_keys[e].length;t++)this.variations_current[e][this.variation_keys[e][t]]=0}};this.update_current=function(){this.reset_current();for(var e=0;e<this.variations_available.length;e++)for(var t in this.variations_available[e]){var n=this.variations_available[e][t],r=this.variations_selected[t];if(r&&r==n)this.variations_current[t][n]=1;else{var i=!0;for(var s in this.variations_selected){if(s==t)continue;var o=this.variations_selected[s],u=this.variations_available[e][s];o&&u&&o!=u&&(i=!1)}if(i)if(n)this.variations_current[t][n]=1;else for(var a in this.variations_current[t])this.variations_current[t][a]=1}}this.recalc_needed=!1};this.get_current=function(){this.recalc_needed&&this.update_current();return this.variations_current};this.get_value_is_current=function(e,t){this.recalc_needed&&this.update_current();return this.variations_current[e][t]===!0};this.reset_selected=function(){this.recalc_needed=!0;this.variations_selected=[]};this.set_selected=function(e,t){this.recalc_needed=!0;this.variations_selected[e]=t};this.get_selected=function(){return this.variations_selected};this.trigger_callbacks=function(){var e=!0;for(var n in this.variation_keys)e=e&this.variations_selected[n]!=undefined&&this.variations_selected[n]!="";e?this.all_set_callback(this.variations_selected,t):this.not_all_set_callback()}}jQuery(document).ready(function(e){function t(){var t=e("div.images img:eq(0)"),n=e("div.images a.zoom:eq(0)"),r=e(t).attr("data-o_src"),i=e(n).attr("data-o_href");if(r&&i){e(t).attr("src",r);e(n).attr("href",i)}e("form input[name=variation_id]").val("").change();e(".single_variation_wrap").hide();e(".single_variation").text("");e().uniform&&e.isFunction(e.uniform.update)&&e.uniform.update()}function n(t,n){var i=null;for(sa in t)e("#"+sa).val(t[sa]);for(var s=0;s<n.length;s++){var o=!0;for(attribute in n[s].attributes)for(selected_attribute in t)if(selected_attribute==attribute){var u=n[s].attributes[attribute];u!=t[selected_attribute]&&(o=!1)}o&&(i=n[s])}if(!i)for(var s=0;s<n.length;s++){var o=!0;for(attribute in n[s].attributes)for(selected_attribute in t)if(selected_attribute==attribute){var u=n[s].attributes[attribute],a=t[selected_attribute];u!=""&&u!=a&&(o=!1)}o&&(i=n[s])}i&&r(i)}function r(t){i(t);e(".variations_button").show();e(".single_variation").html(t.price_html+t.availability_html);t.sku?e(".product_meta").find(".sku").text(t.sku):e(".product_meta").find(".sku").text("");e(".single_variation_wrap").find(".quantity").show();t.min_qty?e(".single_variation_wrap").find("input[name=quantity]").attr("data-min",t.min_qty).val(t.min_qty):e(".single_variation_wrap").find("input[name=quantity]").removeAttr("data-min");t.max_qty?e(".single_variation_wrap").find("input[name=quantity]").attr("data-max",t.max_qty):e(".single_variation_wrap").find("input[name=quantity]").removeAttr("data-max");if(t.is_sold_individually=="yes"){e(".single_variation_wrap").find("input[name=quantity]").val("1");e(".single_variation_wrap").find(".quantity").hide()}e("form input[name=variation_id]").val(t.variation_id).change();e(".single_variation_wrap").slideDown("200").trigger("show_variation",[t]);e("form.cart").trigger("found_variation",[t])}function i(t){var n=e("div.images img:eq(0)"),r=e("div.images a.zoom:eq(0)"),i=e(n).attr("data-o_src"),s=e(n).attr("data-o_title"),o=e(r).attr("data-o_href"),u=t.image_src,a=t.image_link,f=t.image_title;i||e(n).attr("data-o_src",e(n).attr("src"));s||e(n).attr("data-o_title",e(n).attr("title"));o||e(r).attr("data-o_href",e(r).attr("href"));if(u&&u.length>1){e(n).attr("src",u);e(n).attr("title",f);e(n).attr("alt",f);e(r).attr("href",a);e(r).attr("title",f)}else{e(n).attr("src",i);e(n).attr("title",s);e(n).attr("alt",s);e(r).attr("href",o);e(r).attr("title",s)}}function s(){e("div.select-option").delegate("a","click",function(t){t.preventDefault();var n=e(this).closest("div.select-option");if(n.hasClass("disabled"))return!1;if(n.hasClass("selected")){n.removeClass("selected");var r=n.closest("div.select");r.data("value","");e(this).parents("div.select").trigger("change",[])}else{var r=e(this).closest("div.select");e(r).find("div.select-option").removeClass("selected");n.addClass("selected");r.data("value",n.data("value"));e(this).parents("div.select").trigger("change",[])}return!1});e("form.cart").on("change","div.select",function(){$variation_form=e(this).closest("form.cart");calculator=$variation_form.data("calculator");$variation_form.trigger("woocommerce_variation_select_change");var t=e(this).closest(".variation_form_section");e("select",t).each(function(t,n){var r=e(n).val();r=r.replace("'","&#039;");r=r.replace('"',"&quot;");calculator.set_selected(e(n).data("attribute-name"),r)});e("div.select",t).each(function(t,n){calculator.set_selected(e(n).data("attribute-name"),e(n).data("value"))});var n=calculator.get_current();e("select",t).each(function(t,r){var i=e(r).data("attribute-name"),s=n[i];e(r).find("option:gt(0)").each(function(t,n){var r=e(n).val();r=r.replace("'","&#039;");r=r.replace('"',"&quot;");s[r]?e(n).removeAttr("disabled"):e(n).attr("disabled","disabled")})});e("div.select",t).each(function(t,r){var i=e(r).data("attribute-name"),s=n[i];e(r).find("div.select-option").each(function(t,n){s[e(n).data("value")]?e(n).removeClass("disabled"):e(n).addClass("disabled","disabled")})});calculator.trigger_callbacks()});e("form.cart").on("change","select",function(){$variation_form=e(this).closest("form.cart");calculator=$variation_form.data("calculator");var t=e(this).closest(".variation_form_section");e("select",t).each(function(t,n){var r=e(n).val();r=r.replace("'","&#039;");r=r.replace('"',"&quot;");calculator.set_selected(e(n).data("attribute-name"),r)});var n=calculator.get_current();e("select",t).each(function(t,r){var i=e(r).data("attribute-name"),s=n[i];e(r).find("option:gt(0)").each(function(t,n){var r=e(n).val();r=r.replace("'","&#039;");r=r.replace('"',"&quot;");s[r]?e(n).removeAttr("disabled"):e(n).attr("disabled","disabled")})});e("div.select",t).each(function(t,r){var i=e(r).data("attribute-name"),s=n[i];e(r).find("div.select-option").each(function(t,n){s[e(n).data("value")]?e(n).removeClass("disabled"):e(n).addClass("disabled","disabled")})});calculator.trigger_callbacks()});e("div.select-option[data-default=true]").find("a").click();e("select","form.cart").trigger("change",[])}e(document).on("wc_variation_form","form.variations_form.swatches",function(){if(!e(this).data("calculator")){var r=new variation_calculator(e(this).data("product_attributes"),e(this).data("product_variations"),e(this).data("product_variations_flat"),n,t);e(this).find(".variations select").unbind();e(this).find("div.select, select").unbind();e(this).data("calculator",r);s();r.reset_selected();r.reset_current()}});e("form.variations_form.swatches").each(function(){var r=new variation_calculator(e(this).data("product_attributes"),e(this).data("product_variations"),e(this).data("product_variations_flat"),n,t);e(this).find(".variations select").unbind();e(this).find("div.select, select").unbind();e(this).data("calculator",r);s();r.reset_selected();r.reset_current()})});