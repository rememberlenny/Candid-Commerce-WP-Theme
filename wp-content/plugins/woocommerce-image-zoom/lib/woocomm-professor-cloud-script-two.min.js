//////////////////////////////////////////////////////////////////////////////////
// Cloud Zoom V1.0.2
// (c) 2010 by R Cecco. <http://www.professorcloud.com>
// MIT License
//
// Please retain this copyright header in all versions of the software
//////////////////////////////////////////////////////////////////////////////////
jQuery(document).ready(function($){function format(e){for(var t=1;t<arguments.length;t++)e=e.replace("%"+(t-1),arguments[t]);return e}function CloudZoom(e,t){var n=jQuery("img",e),r,i,s=null,o=null,u=null,a=null,f=null,l=null,c,h=0,p,d,v=0,m=0,g=0,y=0,b=0,w,E,S=this,x;setTimeout(function(){if(o===null){var t=e.width();e.parent().append(format('<div style="width:%0px;position:absolute;top:75%;left:%1px;text-align:center" class="cloud-zoom-loading" >Loading...</div>',t/3,t/2-t/6)).find(":last").css("opacity",.5)}},200);this.removeBits=function(){if(u){u.remove();u=null}if(a){a.remove();a=null}if(f){f.remove();f=null}jQuery(".cloud-zoom-loading",e.parent()).remove()};this.destroy=function(){e.data("zoom",null);if(o){o.unbind();o.remove();o=null}if(s){s.remove();s=null}};this.fadedOut=function(){if(s){s.remove();s=null}};this.controlLoop=function(){if(u){if(cloudVariationId!=""&&cloudVariationLink!=""){newImgWidth=bigImgWidth;newImgHeight=bigImgHeight}else{newImgWidth=c.width;newImgHeight=c.height}var e=w-n.offset().left-p*.5>>0,r=E-n.offset().top-d*.5>>0;e<0?e=0:e>n.outerWidth()-p&&(e=n.outerWidth()-p);r<0?r=0:r>n.outerHeight()-d&&(r=n.outerHeight()-d);u.css({left:e,top:r});u.css("background-position",-e+"px "+ -r+"px");v=e/n.outerWidth()*newImgWidth>>0;m=r/n.outerHeight()*newImgHeight>>0;y+=(v-y)/t.smoothMove;g+=(m-g)/t.smoothMove;s.css("background-position",-(y>>0)+"px "+(-(g>>0)+"px"))}h=setTimeout(function(){S.controlLoop()},30)};this.init2=function(e,t){b++;t===1&&(c=e);b===2&&this.init()};this.init=function(){if(cloudVariationId!=""&&cloudVariationLink!=""){newImgWidth=bigImgWidth;newImgHeight=bigImgHeight}else{newImgWidth=c.width;newImgHeight=c.height}jQuery(".cloud-zoom-loading",e.parent()).remove();o=e.parent().append(format("<div class='mousetrap' style='background-image:url(\".\");z-index:999;position:absolute;width:%0px;height:%1px;left:%2px;top:%3px;'></div>",n.outerWidth(),n.outerHeight(),0,0)).find(":last");var r="ontouchstart"in document.documentElement?!0:!1,i="touchmove mousemove",l="touchend mouseleave",v="touchstart mouseenter",m="touchstart click";o.bind(i,this,function(e){w=typeof e.originalEvent.touches!="undefined"?e.originalEvent.touches[0].pageX:e.pageX;E=typeof e.originalEvent.touches!="undefined"?e.originalEvent.touches[0].pageY:e.pageY});o.bind(l,this,function(e){clearTimeout(h);u&&u.fadeOut(299);a&&a.fadeOut(299);f&&f.fadeOut(299);s.fadeOut(300,function(){S.fadedOut()});return!1});o.bind(v,this,function(i){r&&i.preventDefault();w=typeof i.originalEvent.touches!="undefined"?i.originalEvent.touches[0].pageX:i.pageX;E=typeof i.originalEvent.touches!="undefined"?i.originalEvent.touches[0].pageY:i.pageY;x=i.data;if(s){s.stop(!0,!1);s.remove()}var l=t.adjustX,h=t.adjustY,v=n.outerWidth(),m=n.outerHeight(),g=t.zoomWidth,y=t.zoomHeight;t.zoomWidth=="auto"&&(g=v);t.zoomHeight=="auto"&&(y=m);var b=e.parent();switch(t.position){case"top":h-=y;break;case"right":l+=v;break;case"bottom":h+=m;break;case"left":l-=g;break;case"inside":g=v;y=m;break;default:b=jQuery("#"+t.position);if(!b.length){b=e;l+=v;h+=m}else{g=b.innerWidth();y=b.innerHeight()}}if(cloudVariationId!=""&&cloudVariationLink!=""){var S=cloudVariationLink;jQuery("a#cloud-link").attr("href",S)}else{var S=c.src;jQuery("a#cloud-link").attr("href",S)}if(cloudVariationId!=""&&cloudVariationLink!=""){newImgWidth=bigImgWidth;newImgHeight=bigImgHeight}else{newImgWidth=c.width;newImgHeight=c.height}newImgWidth<n.outerWidth()?backgroundW=n.outerWidth():backgroundW=newImgWidth;newImgHeight<n.outerHeight()?backgroundH=n.outerWidth():backgroundH=newImgHeight;s=b.append(format('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none; position:absolute; left:%0px; top:%1px; width:%2px; height:%3px; background-image:url(\'%4\'); z-index:99; background-size:%5px %6px"></div>',l,h,g,y,S,backgroundW,backgroundH)).find(":last");n.attr("title")&&t.showTitle&&s.append(format('<div class="cloud-zoom-title">%0</div>',n.attr("title"))).find(":last").css("opacity",t.titleOpacity);s.fadeIn(500);if(u){u.remove();u=null}p=n.outerWidth()/newImgWidth*s.width();d=n.outerHeight()/newImgHeight*s.height();p>n.outerWidth()&&(p=n.outerWidth());d>n.outerHeight()&&(d=n.outerHeight());u=e.append(format("<div class = 'cloud-zoom-lens' style='display:none;z-index:98;position:absolute;width:%0px;height:%1px;'></div>",p,d)).find(":last");o.css("cursor",u.css("cursor"));var T=!1;if(t.tint){u.css("background",'url("'+n.attr("src")+'")');a=e.append(format('<div style="display:none;position:absolute; left:0px; top:0px; width:%0px; height:%1px; background-color:%2;" />',n.outerWidth(),n.outerHeight(),t.tint)).find(":last");a.css("opacity",t.tintOpacity);T=!0;a.fadeIn(500)}if(t.softFocus){u.css("background",'url("'+n.attr("src")+'")');f=e.append(format('<div style="position:absolute;display:none;top:2px; left:2px; width:%0px; height:%1px;" />',n.outerWidth()-2,n.outerHeight()-2,t.tint)).find(":last");f.css("background",'url("'+n.attr("src")+'")');f.css("opacity",.5);T=!0;f.fadeIn(500)}T||u.css("opacity",t.lensOpacity);t.position!=="inside"&&u.fadeIn(500);x.controlLoop();return})};r=new Image;jQuery(r).load(function(){S.init2(this,0)});r.src=n.attr("src");i=new Image;jQuery(i).load(function(){S.init2(this,1)});i.src=e.attr("href")}var cloudVariationId="",cloudVariationLink="",cloudVariationSrc="",bigImgWidth="",bigImgHeight="";jQuery.fn.CloudZoom=function(options){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}this.each(function(){var relOpts,opts;eval("var	a = {"+jQuery(this).attr("cloud")+"}");relOpts=a;if(jQuery(this).is(".cloud-zoom")){jQuery(this).css({position:"relative",display:"block"});jQuery("img",jQuery(this)).css({display:"block"});jQuery(this).parent().attr("id")!="wrap"&&jQuery(this).wrap('<div id="wrap" style="top:0px;z-index:90;position:relative;"></div>');opts=jQuery.extend({},jQuery.fn.CloudZoom.defaults,options);opts=jQuery.extend({},opts,relOpts);jQuery(this).data("zoom",new CloudZoom(jQuery(this),opts))}else if(jQuery(this).is(".cloud-zoom-gallery")){opts=jQuery.extend({},relOpts,options);jQuery(this).data("relOpts",opts);jQuery(this).bind("click",jQuery(this),function(e){cloudVariationId="";cloudVariationLink="";var t=e.data.data("relOpts");jQuery("#"+t.useZoom).data("zoom").destroy();jQuery("#"+t.useZoom).attr("href",e.data.attr("href"));jQuery("a#cloud-link").attr("href",e.data.attr("href"));jQuery("#"+t.useZoom+" img").attr("src",e.data.data("relOpts").smallImage);jQuery("#"+e.data.data("relOpts").useZoom).CloudZoom();return!1})}});return this};jQuery.fn.CloudZoom.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:!1,tintOpacity:.5,lensOpacity:.5,softFocus:!1,smoothMove:3,showTitle:!0,titleOpacity:.5,adjustX:0,adjustY:0};jQuery("a.zoom").unbind("click");jQuery("a.fancybox").prettyPhoto({social_tools:!1,theme:"pp_woocommerce",horizontal_padding:40,opacity:.9});jQuery(document).on("show_variation",".single_variation_wrap",function(e,t){cloudVariationId=t.variation_id;cloudVariationLink=t.image_link;cloudVariationSrc=t.image_src;jQuery("a#cloud-link").attr("href",cloudVariationSrc);var n=new Image;n.onload=function(){bigImgWidth=n.width;bigImgHeight=n.height};n.src=cloudVariationLink});jQuery("form.variations_form").on("woocommerce_variation_select_change",function(e){var t=$(this).closest(".product"),n=t.find("div.images img:eq(0)"),r=t.find("div.images a.zoom:eq(0)"),i=n.attr("data-o_src"),s=n.attr("data-o_title"),o=r.attr("data-o_href");if(i&&o&&s){n.attr("src",i).attr("alt",s).attr("title",s);r.attr("href",o)}cloudVariationId="";cloudVariationLink="";cloudVariationSrc="";jQuery("a#zoom1").attr("href",o);jQuery(".cloud-zoom").each(function(){jQuery(this).data("zoom").destroy()});jQuery(".cloud-zoom, .cloud-zoom-gallery").CloudZoom()});jQuery(".cloud-zoom, .cloud-zoom-gallery").CloudZoom()});