/* Ajax-Layerd Nav Widgets 
 * Shopping Cart: WooCommerce
 * File: Frontend JS 
 * License: GPL
 * Copyright: SixtyOneDesigns 
 */

/* Globals
 * Setup variables and id  for areas that are 
 * going to be refreshed
 */
var content=ajax_layered_nav.containers;var orderby=ajax_layered_nav.orderby;var elements_to_remove=new Array;var DocReadyReload=false;var isWorking=false;var http=getHTTPObject();var pagination;function checkPagination(){if(jQuery("nav.pagination").length>0){pagination=""}}jQuery(document).ready(function(){pageLoaderInit();jQuery(document).on("change",orderby+" select",function(){jQuery(orderby).submit();return false})});window.onpopstate=function(event){if(event.state!=undefined){loadPage(document.location.toString(),1)}};function pageLoaderInit(){jQuery('.widget_layered_nav a, .widget_layered_nav input[type="checkbox"], .widget_ajax_layered_nav_filters a').live("click",function(event){this.blur();var caption=this.title||this.name||"";var group=this.rel||false;loadPage(jQuery(this).data("link"));event.preventDefault();return false})}function getHTTPObject(){var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{if(window.ActiveXObject){xmlhttp=new ActiveXObject("MSXML2.XMLHTTP.3.0")}}return xmlhttp}function loadPage(url,push){if(!isWorking){nohttp=url.replace("http://","").replace("https://","");firstsla=nohttp.indexOf("/");pathpos=url.indexOf(nohttp);path=url.substring(pathpos+firstsla);if(push!=1){var stateObj={foo:1000+Math.random()*1001};if(!jQuery.browser.msie){history.pushState(stateObj,"ajax page loaded...",path)}}jQuery.each(content,function(index,value){if(value==ajax_layered_nav.product_container){var max=0;max=jQuery(ajax_layered_nav.product_container).outerHeight();jQuery(value+"").fadeOut("fast",function(){jQuery(value).html('<center style="min-height:'+max+'px;"><p>'+ajax_layered_nav.loading_text+'...<br><img src="'+ajax_layered_nav.loading_img+'" alt="loading"></p></center>');jQuery(value).css({height:max}).fadeIn("slow",function(){})})}http.open("GET",url,true);isWorking=true;http.onreadystatechange=showPage;http.send(null)})}return false}function showPage(){if(http.readyState==4){if(http.status==200){isWorking=false;elements_to_remove=[];elements_to_remove=content.slice();jQuery.each(content,function(index,value){var details=http.responseText;if(jQuery(value,details).size()>0){var depth=1;var output="";jQuery(value).fadeOut("fast",function(){jQuery(value).html(jQuery(value,details).html());jQuery(value).fadeIn(1);if(DocReadyReload==true){$(document).trigger("ready")}})}else{jQuery.each(elements_to_remove,function(index,value){jQuery(value).empty()})}});pageLoaderInit();return false}else{}}return false}Array.prototype.removeByValue=function(val){for(var i=0;i<this.length;i++){if(this[i]==val){this.splice(i,1);break}}};